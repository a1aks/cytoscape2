Welcome  to the New Cytoscape Build Process
--------------------------------------------

I.  Doing a Clean Checkout
==========================

If this is the first time reading this, make sure that you have done a clean checkout.  
You will need to have subversion installed (http://subversion.tigris.org).

Then, do a clean check-out:

svn checkout file:///cellar/common/svn/cytoscape/trunk cytoscape 


II.  New Directory Structure
============================

Cytoscape now contains the following directory structure:


cytoscape
   +
   +---resources/ Contains various files used to compile or run cytoscape,
   +              e.g. shell scripts, annotation files, props files etc.
   +
   +---build/     This directoy is automatically generated by Ant.  After compilation,
   +              this directory will contain all generated class files.
   +
   +---images/    Contains image files.
   +
   +---lib/       Contains all JAR files.
   +
   +---src/       Contains all source .java files.
   +
   +---testData/  Contains all test and sample data.
   +
   +---tools/     Contains misc. tools for cytoscape distribution.
   +
   +---docs/      Contains all user documentation and manuals.
   +
   +---plugins/   Contains all core plugins.
   +
   +---licences/  Contains all third party licenses. 
   +
   +---help/      Contains all javahelp files and images. 


III. New Build Process
======================

To build cytoscape:

1.  Download and install Jakarta Ant.  Download from:  http://ant.apache.org/.  
Installation instructions are available at:  http://ant.apache.org/manual/install.html.

2.  To compile cytoscape, type:

	ant release

3.  To run cytoscape, type:

	ant run

If cytoscape appears, everything is set up correctly!

For questions, email Ethan Cerami:  cerami@cbio.mskcc.org.


IV.  Doing a Full Cytoscape Release
===================================

This section contains notes / tasks for doing a full Cytoscape release.  Doing a full release
of Cytoscape is rather involved.  Some of the tasks are automated and some are manual.

	A.  Core Release Tasks
	----------------------------
	Modify the Cytoscape Version Number in build.xml
		The ant build.xml file contains a property that looks like this:

		<property name="version" value="2.0ALPHA4"/>

		The value of this property is very important as it is used to create
		the final release files.  For example, the final release file for 2.0ALPHA4 will
		be cytoscape-v2.0ALPHA4.tar.gz.

		Update this value to the current version number.

	Tag the Complete Release
		The tag convention we have adopted looks like this:  "cyto-2_0-alpha4".
		Please follow this convention.

		To tag a release:

		svn copy \
		  file:///cellar/common/svn/cytoscape/branches/cy-release-branch-x \
		  file:///cellar/common/svn/cytoscape/tags/cyto_version

	Create the final release files
		To do so, run:  ant dist

		The final release files are all placed in cytoscape/build/dist.

		NOTE: The installation bundles are created using install4j.  You
		will need install4j installed on your machine and you must
		have the environment variable INSTALL4J_HOME set and pointing
		to the location of the install4j install.

	Deploy the new release files.
		Copy all files to their release directory on the distribution
		server.  Currently this is chianti.ucsd.edu and each release
		lives in a subdirectory of /var/www/html.


	D.  Update Cytocape.org Web Site
	-------------------------------------------------

		svn co file:///cellar/common/svn/cyto_web/trunk cyto_web

	Make sure the Cytoscape Manual (PDF) is Up-to-Date
		We currently keep a copy of CytoscapeX_YManual.pdf checked into
		two places:  cytscape/user_docs and cyto_web/manual.  cytoscape/user_docs is
		the definitive one, and cyto_web/manual is the copy.

		Before doing a full release, make sure to copy the latest manual from
		cytoscape/user_docs to cyto_web/manual, and check in the latest version.

	Update cyto_web/config.php

		This file contains global configurations for cytoscape.org
		You will probably need to add variable links for the newly released 
		version of Cytoscape.

	Deploy Everything to cytoscape.org
		To do so, update cyto_web/cyto.properties with a valid user/password.
		If you don't have one, email Trey or Ethan.

		Then, type:  ant deploy.

	Copy over the latest Javadocs.
		Latest Javadocs are currently hosted on cbio.mkscc.org, and are not part
		of cytoscape.org.  That's mainly because cytoscape.org FTP connection is so slow.

		First, copy over the source code from the task framework.  We want the API for
		this framework to be included in the global 2.1 Javadoc, and this is the easiest
		way to do it.  The code is currently located in
		csplugins/common/task/src/cytoscape/task.  In the future, we should probably
		come up with an automated way of doing this.
		
		Second, run:  ant doc.

		Then, tar/gzip everything in the API directory.

		scp the gzip file to /var/www/cytoscape/javadoc and unpack.


